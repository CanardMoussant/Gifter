@(addParticipantForm: Form[(Long, String, String)]
)

@import helper._

@import models.gift._

<form class="form-search form-inline add-participant-form">
    @addParticipantForm.globalError.map { error =>
      <div class="alert error">
        <p>@error.message</p>
      </div>
    }
    @addParticipantForm.error("eventid").map { error =>
      <div class="alert error">
        <p>@Messages(error.message)</p>
      </div>
    }
    @addParticipantForm.error("email").map { error =>
      <div class="alert error">
        <p>@Messages(error.message)</p>
      </div>
    }
    <div class="well">
  
      <input type="hidden" name="eventid" value="@addParticipantForm("eventid").value">
      <input type="text" class="input-medium search-query" name="email" value="@addParticipantForm("email").value" placeholder="Enter an email address...">
      
      <select name="role">
        @for(role <- Participant.Role.values) {
            <option
            @if(role == addParticipantForm("role").value) {
              selected
            }
            >@role</option>
        }
      </select>
  
      <!--input type="text" class="input-medium search-query" name="email" value="" placeholder=""-->
  
      <button type="button" class="btn btn-primary add-participant-btn">Add</button>
    </div>
</form>
<script type="text/javascript">

$('.add-participant-btn').on('click', function(e) {
  $.ajax({
    url: '/addParticipant',
    type: 'GET',
    contentType: "application/x-www-form-urlencoded",
    data: $('.add-participant-form').serializeArray(),
    success: function( response ) {
      $('#participants-table').html(response);
    },
    error: function(jqXHR, textStatus, errorThrown) {
      if(jqXHR.status == 400) {
        $('.add-participant-form').html(jqXHR.responseText)
      }
    }
  });
})
</script>
